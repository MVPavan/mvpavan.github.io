<!doctype html>




<html
    dir="ltr"
    lang="en"
    
>
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#ffffff">
    <link rel="stylesheet" href="/assets/css/app.css">
    <link
        rel="shortcut icon"
        type="image/png"
        
            href="/favicon.png"
        
    >
    <script defer src="https://unpkg.com/alpinejs@3.9.0/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">
    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma-social@1/bin/bulma-social.min.css">
    
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>PEFT | MVPavan’s Notes</title>
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="PEFT" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Welcome to my GitHub Pages site." />
<meta property="og:description" content="Welcome to my GitHub Pages site." />
<link rel="canonical" href="http://localhost:4000/MVPArchive/AI/Courses/Study/Training/" />
<meta property="og:url" content="http://localhost:4000/MVPArchive/AI/Courses/Study/Training/" />
<meta property="og:site_name" content="MVPavan’s Notes" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="PEFT" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Welcome to my GitHub Pages site.","headline":"PEFT","url":"http://localhost:4000/MVPArchive/AI/Courses/Study/Training/"}</script>
<!-- End Jekyll SEO tag -->

    <!-- head scripts -->
</head>

    <body>
        
            <div class="">
    <script
        src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js"
    ></script>

    <div class="container py-6 px-4" id="cookieBanner">
        <div class="columns">
            <div class="column is-fullwidth ">
                <div class="content">
                    <p>We use cookies on this site to enhance your user experience</p>
                    <p>
                        By clicking the Accept button, you agree to us doing so.
                        <a href="/cookie-policy/">More info on our cookie policy</a>
                    </p>
                </div>

                <div class="buttons">
                    <button class="button is-primary" onclick="acceptCookies()">Accept all cookies</button>
                    <button class="button is-primary" onclick="rejectCookies()">Reject all cookies</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function acceptCookies() {
            
            Cookies.set('showCookieBanner', 'false', { expires: 7, path: '/' });
            Cookies.set('cookiesAccepted', 'true', {expires: 7, path: '/'});
            toggleCookieBanner();
        }

        function rejectCookies() {
            Cookies.set('showCookieBanner', 'false', { expires: 7, path: '/' });
            toggleCookieBanner();
        }

        function toggleCookieBanner() {
            var showBanner = Cookies.get('showCookieBanner');
            var banner = document.getElementById('cookieBanner');

            if (showBanner === 'false') {
                banner.setAttribute('style', 'display: none;');
            } else {
                banner.setAttribute('style', 'display: block;');
            }
        }

        toggleCookieBanner();
    </script>
</div>

        
        <nav
    class="navbar is-primary "
    x-data="{ openNav: false }"
>
    <div class="container">
        <div class="navbar-brand">
            <a href="/" class="navbar-item">
                MVPavan's Notes
            </a>
            <a
                role="button"
                class="navbar-burger burger"
                aria-label="menu"
                aria-expanded="false"
                data-target="navMenu"
                :class="{ 'is-active': openNav }"
                x-on:click="openNav = !openNav"
            >
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>
        <div class="navbar-menu" id="navMenu" :class="{ 'is-active': openNav }">
            <div class="navbar-start">
                <a href="/" class="navbar-item ">Home</a>
                
                    
                        
                            <a
                                href="/docs/"
                                class="navbar-item "
                            >Docs</a>
                        
                    
                
            </div>

            <div class="navbar-end">
                
            </div>
        </div>
    </div>
</nav>

        
            <section
    class="hero  is-medium  is-bold is-primary"
    
>
    <div class="hero-body ">
        <div class="container">
            <h1 class="title is-2">PEFT</h1>
            <p class="subtitle is-3"></p>
            
        </div>
    </div>
</section>

        
        

        <section class="section">
            <div class="container">
                <div class="columns is-multiline">
                    
                    <div class="column is-8">
                        

                        

                        

                        

                        
<div class="content">
    
<h1 id="peft">PEFT</h1>

<h2 id="lora">LORA</h2>

<p><img src="attachments/Pasted%20image%2020250131085440.png" alt="" /></p>

<p><img src="attachments/Pasted%20image%2020250131095705.png" alt="" /></p>

<p><img src="attachments/Pasted%20image%2020250131095717.png" alt="" /></p>

<h2 id="dora">DORA</h2>

<p><img src="attachments/Pasted%20image%2020250131085638.png" alt="" /></p>

<h1 id="continual-pre-train">Continual Pre-Train</h1>

<ol>
  <li>Simple rewarming and re-decaying lr</li>
  <li>Adding a small portion (e.g., 5%) of the original pretraining data (D1) to the new dataset (D2) to prevent catastrophic forgetting. Note that smaller fractions like 0.5% and 1% were also effective.</li>
</ol>

<h1 id="sftinstruction-tuning">SFT/Instruction Tuning:</h1>

<ol>
  <li>Obtain a pretrained base model:
 Base models are trained for next word prediction, though they are good at natural language understanding, output need not be in the format we prefer it. It would be just predicting next tokens with out any structure to follow.</li>
  <li>Supervised/Instruction Finetuning:
 Using a specific structured chat template (conversation/instructions/QA) text dataset, model is supervised finetuned to align to answer in that structure. Data can be domain specific.</li>
</ol>

<h1 id="preference-alignment">Preference Alignment:</h1>

<h2 id="rlhf-reinforcement-learning-from-human-feedback">RLHF: Reinforcement Learning from Human Feedback</h2>

<p><img src="attachments/Pasted%20image%2020250131092813.png" alt="" /></p>

<p><img src="attachments/Pasted%20image%2020250131092822.png" alt="" /></p>

<p><img src="attachments/Pasted%20image%2020250131093144.png" alt="" /></p>

<h2 id="dpo-direct-preference-optimization">DPO: Direct preference optimization</h2>

<p><img src="attachments/Pasted%20image%2020250131094907.png" alt="" /></p>

<p><img src="attachments/Pasted%20image%2020250131094918.png" alt="" /></p>

<p><img src="attachments/Pasted%20image%2020250131094934.png" alt="" /></p>

<h2 id="orpo-odds-ratio-preference-optimization">ORPO: Odds Ratio Preference Optimization</h2>

<p><img src="attachments/Pasted%20image%2020250204203001.png" alt="" /></p>

<p><img src="attachments/Pasted%20image%2020250205092824.png" alt="" /></p>

<p><img src="attachments/Pasted%20image%2020250205092846.png" alt="" /></p>

<p><img src="attachments/Pasted%20image%2020250205092907.png" alt="" /></p>

<p>odds(p) = p/(1-p) -&gt; prob of event happening / prob of not happening
OR(a,b) = odds(a)/odds(b)
yw -&gt; desired response
yl -&gt; undesired response
Aim OR(yw,yl) to be high</p>

<p>Lor -&gt; is low if OR(yw,yl) is high and vice versa</p>

<p>Delta(Lor) = delta(d).h(d)
Aim to decrease Delta(Lor) as yw increases, yl decreases and vice versa
delta(d) -&gt; odds(yl)/(odds(yw)+odds(yl)) –&gt; decreases as yl decreases and yw increases
h(d) -&gt; increase as yw increases and decreases as yw decreases
h(d) -&gt; decreases (negative) as yl increases and increases as yl decreases</p>

<p>so gradient boosts yw increase and yl increase
Implementation in HF library, probabilities we get are logsoftmax so applying exp will give actual probs.</p>

<p><img src="attachments/Pasted%20image%2020250205120542.png" alt="" /></p>

<h1 id="end">end</h1>


</div>

                    </div>
                    
                        <div class="column is-4-desktop is-4-tablet">
                            <p class="title is-4">Latest Posts</p>

<div class="columns is-multiline">
    
</div>

                        </div>
                    
                </div>
            </div>
        </section>
        
            <footer class="footer">
    <div class="container">
        
            <div class="columns is-multiline">
                
            </div>
        

        <div class="content is-small has-text-centered">
            <p class="">Theme built by <a href="https://www.csrhymes.com">C.S. Rhymes</a></p>
        </div>
    </div>
</footer>

        
        <script src="/assets/js/app.js" type="text/javascript"></script><!-- footer scripts -->
</body>
</html>
